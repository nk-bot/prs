"use strict";(()=>{var t={};t.id=713,t.ids=[713],t.modules={145:t=>{t.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},9648:t=>{t.exports=import("axios")},295:t=>{t.exports=import("cheerio")},6249:(t,e)=>{Object.defineProperty(e,"l",{enumerable:!0,get:function(){return function t(e,r){return r in e?e[r]:"then"in e&&"function"==typeof e.then?e.then(e=>t(e,r)):"function"==typeof e&&"default"===r?e:void 0}}})},1040:(t,e,r)=>{r.a(t,async(t,a)=>{try{r.r(e),r.d(e,{config:()=>l,default:()=>p,routeModule:()=>u});var i=r(1802),n=r(7153),c=r(6249),o=r(6389),s=t([o]);o=(s.then?(await s)():s)[0];let p=(0,c.l)(o,"default"),l=(0,c.l)(o,"config"),u=new i.PagesAPIRouteModule({definition:{kind:n.x.PAGES_API,page:"/api/scrape",pathname:"/api/scrape",bundlePath:"",filename:""},userland:o});a()}catch(t){a(t)}})},2032:(t,e,r)=>{r.a(t,async(t,a)=>{try{r.d(e,{H:()=>c});var i=r(9648),n=t([i]);async function c(t){return(await i.default.get(t,{headers:{"User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/123.0.0.0 Safari/537.36","Accept-Language":"en-US,en;q=0.9"}})).data}i=(n.then?(await n)():n)[0],a()}catch(t){a(t)}})},6389:(t,e,r)=>{r.a(t,async(t,a)=>{try{r.r(e),r.d(e,{default:()=>o});var i=r(82),n=r(6629),c=t([i]);async function o(t,e){if("GET"===t.method)return e.status(200).json({message:"Scraper API is working!"});if("POST"!==t.method)return e.status(405).json({error:"Method not allowed"});let{url:r}=t.body;if(!r)return e.status(400).json({error:"Missing URL"});try{let t=await (0,i.i)(r);t.last_updated=new Date().toISOString();let{data:a,error:c}=await n.O.from("products").upsert(t,{onConflict:["url"]});if(c)throw c;e.status(200).json({success:!0,product:t})}catch(t){console.error("Scraping failed:",t),e.status(500).json({error:t.message})}}i=(c.then?(await c)():c)[0],a()}catch(t){a(t)}})},7808:(t,e,r)=>{r.a(t,async(t,a)=>{try{r.d(e,{_:()=>o});var i=r(9648),n=r(295),c=t([i,n]);async function o(t){let{data:e}=await i.default.get(t,{headers:{"User-Agent":"Mozilla/5.0"}}),r=n.load(e),a=r("#productTitle").text().trim(),c=r("#priceblock_ourprice").text().trim()||r(".a-price .a-offscreen").first().text().trim(),o=r("#availability span").text().trim(),s=r("#imgTagWrapperId img").attr("src"),p=[];r("li.image.item img").each((t,e)=>{p.push(r(e).attr("src"))});let l=r("#feature-bullets ul li span").text().trim(),u=r("#RETURNS_POLICY span").text().trim()||"Refer site",m=[];return r("#twister .a-dropdown-container").each((t,e)=>{let a=r(e).find(".a-form-label").text().trim(),i=[];r(e).find("option").each((t,e)=>i.push(r(e).text().trim())),m.push({type:a,options:i})}),{site:"Amazon",url:t,name:a,price:c,availability:o,main_image:s,additional_images:p,description:l,return_policy:u,variants:m}}[i,n]=c.then?(await c)():c,a()}catch(t){a(t)}})},4942:(t,e,r)=>{r.a(t,async(t,a)=>{try{r.d(e,{Q:()=>o});var i=r(295),n=r(2032),c=t([i,n]);async function o(t){let e=await (0,n.H)(t),r=i.load(e),a=r("h1[itemprop='name']").text().trim()||r(".product-title").text().trim(),c=r("meta[property='product:price:amount']").attr("content")||r(".price").first().text().trim()||r(".prod-price").first().text().trim();c||r("script[type='application/ld+json']").each((t,e)=>{try{let t=r(e).html();if(t&&t.includes("price")){let e=JSON.parse(t);if(e.offers&&e.offers.price)return c=e.offers.price,!1}}catch(t){}}),c=c||"Price not available";let o=r(".availability").text().trim()||(r(".out-of-stock").length?"Out of Stock":"In Stock"),s=r(".prod-desc").text().trim()||r(".description").text().trim()||r("meta[name='description']").attr("content"),p=r("img#prodImage").attr("src")||r("meta[property='og:image']").attr("content"),l=[];r(".thumb-image img").each((t,e)=>{let a=r(e).attr("src");a&&l.push(a)});let u=[];return r(".variant-size li, .variant-color li").each((t,e)=>{u.push(r(e).text().trim())}),{name:a,price:c,availability:o,description:s,main_image:p,additional_images:l,variants:u}}[i,n]=c.then?(await c)():c,a()}catch(t){a(t)}})},82:(t,e,r)=>{r.a(t,async(t,a)=>{try{r.d(e,{i:()=>p});var i=r(7808),n=r(4942),c=r(9530),o=r(3321),s=t([i,n,c,o]);async function p(t){if(t.includes("amazon"))return await (0,i._)(t);if(t.includes("firstcry"))return await (0,n.Q)(t);if(t.includes("mothercare"))return await (0,c.H)(t);if(t.includes("myntra"))return await (0,o.X)(t);throw Error("Unsupported site")}[i,n,c,o]=s.then?(await s)():s,a()}catch(t){a(t)}})},9530:(t,e,r)=>{r.a(t,async(t,a)=>{try{r.d(e,{H:()=>o});var i=r(295),n=r(2032),c=t([i,n]);async function o(t){let e=await (0,n.H)(t),r=i.load(e),a=r("h1").text().trim()||r("meta[property='og:title']").attr("content"),c=r("meta[property='product:price:amount']").attr("content")||r(".price").first().text().trim()||r(".prod-price").first().text().trim();c||r("script[type='application/ld+json']").each((t,e)=>{try{let t=r(e).html();if(t&&t.includes("price")){let e=JSON.parse(t);if(e.offers&&e.offers.price)return c=e.offers.price,!1}}catch(t){}}),c=c||"Price not available";let o=r(".availability").text().trim()||(r(".out-of-stock").length?"Out of Stock":"In Stock"),s=r(".product-description").text().trim()||r("meta[name='description']").attr("content"),p=r("img.primary-image").attr("src")||r("meta[property='og:image']").attr("content"),l=[];r(".product-thumbnails img").each((t,e)=>{let a=r(e).attr("src");a&&l.push(a)});let u=[];return r(".variant-size li, .variant-color li").each((t,e)=>{u.push(r(e).text().trim())}),{name:a,price:c,availability:o,description:s,main_image:p,additional_images:l,variants:u}}[i,n]=c.then?(await c)():c,a()}catch(t){a(t)}})},3321:(t,e,r)=>{r.a(t,async(t,a)=>{try{r.d(e,{X:()=>o});var i=r(295),n=r(2032),c=t([i,n]);async function o(t){let e=await (0,n.H)(t),r=i.load(e),a=r("h1.pdp-title").text().trim()||r("meta[property='og:title']").attr("content"),c=r("meta[property='product:price:amount']").attr("content")||r(".price").first().text().trim()||r(".prod-price").first().text().trim();c||r("script[type='application/ld+json']").each((t,e)=>{try{let t=r(e).html();if(t&&t.includes("price")){let e=JSON.parse(t);if(e.offers&&e.offers.price)return c=e.offers.price,!1}}catch(t){}}),c=c||"Price not available";let o=e.includes("OUT_OF_STOCK")?"Out of Stock":"In Stock",s=r("div.pdp-product-description-content").text().trim()||r("meta[name='description']").attr("content"),p=r("img.pdp-image").first().attr("src")||r("meta[property='og:image']").attr("content"),l=[];r("img.pdp-image").each((t,e)=>{let a=r(e).attr("src");a&&l.push(a)});let u=[];return r(".size-buttons-size-button").each((t,e)=>{u.push(r(e).text().trim())}),{name:a,price:c,availability:o,description:s,main_image:p,additional_images:l,variants:u}}[i,n]=c.then?(await c)():c,a()}catch(t){a(t)}})},6629:(t,e,r)=>{r.d(e,{O:()=>a});let a=(0,require("@supabase/supabase-js").createClient)("https://eaoesizjuqtmdexmyrwh.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImVhb2VzaXpqdXF0bWRleG15cndoIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjIwMDc0MDMsImV4cCI6MjA3NzU4MzQwM30.coc2iLjljmUPFsr7lPPoHlglNVLRzjjNchop1ybNwSw")},7153:(t,e)=>{var r;Object.defineProperty(e,"x",{enumerable:!0,get:function(){return r}}),function(t){t.PAGES="PAGES",t.PAGES_API="PAGES_API",t.APP_PAGE="APP_PAGE",t.APP_ROUTE="APP_ROUTE"}(r||(r={}))},1802:(t,e,r)=>{t.exports=r(145)}};var e=require("../../webpack-api-runtime.js");e.C(t);var r=e(e.s=1040);module.exports=r})();